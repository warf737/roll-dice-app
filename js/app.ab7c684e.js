(function(t){function e(e){for(var s,l,n=e[0],o=e[1],c=e[2],m=0,h=[];m<n.length;m++)l=n[m],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&h.push(i[l][0]),i[l]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,n=1;n<a.length;n++){var o=a[n];0!==i[o]&&(s=!1)}s&&(r.splice(e--,1),t=l(l.s=a[0]))}return t}var s={},i={app:0},r=[];function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/roll-dice-app/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],o=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"18d4":function(t,e,a){},"1c92":function(t,e,a){},"2cbe":function(t,e,a){"use strict";a("e3a4")},3003:function(t,e,a){},"4c32":function(t,e,a){"use strict";a("f10d")},"53f8":function(t,e,a){"use strict";a("c248")},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("character-main")],1)},r=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"character"},[a("characteristic-out",{attrs:{stats:t.mainStatTotal,mods:t.modStatTotal,armory:t.armoryClass,hitBonus:t.hitBonus,damageBonus:t.damageBonus}}),a("combat",{attrs:{combatAbilities:t.combatAbilities},on:{"roll-check":t.rollCheck,"transfer-bonuses":t.transferBonuses,"change-attack-number":t.changeAttack}}),t.rollResults?a("RollResult",{attrs:{rollResults:t.rollResults},on:{reroll:t.rollCheck,"roll-crit":t.rollCrit,"close-dialog":t.clearRollResult}}):t._e()],1)},n=[];const o={min:1,d4:4,d8:8,d10:10,d20:20,d100:100};var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"statistic"},[t._l(t.stats,(function(e,s,i){return a("li",{key:i,staticClass:"statistic__item"},[a("characteristic",{attrs:{stat:e,mod:t.mods[s]}})],1)})),a("span",{staticClass:"item"},[t._v("КБ: "+t._s(t.armory))]),a("span",{staticClass:"item"},[t._v("Бонус попадания: "+t._s(t.hitBonus))]),a("span",{staticClass:"item"},[t._v("Бонус урона: "+t._s(t.damageBonus))])],2)},u=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[a("div",{staticClass:"item__body"},[a("p",{staticClass:"item__body-title"},[t._v(t._s(t.stat.short_name)+":")]),a("p",{staticClass:"item__body-value"},[t._v(t._s(t.stat.value))]),a("p",{staticClass:"item__body-value"},[t._v(t._s(t.mod))])]),a("div",{staticClass:"item__footer"})])},h=[],d={name:"Characteristic",props:{stat:{type:Object,default:()=>{}},mod:{}},methods:{}},p=d,b=(a("eb79"),a("2877")),f=Object(b["a"])(p,m,h,!1,null,"903d70e6",null),v=f.exports,_={name:"CharacteristicOut",components:{characteristic:v},props:{stats:{type:Object,default:()=>{}},mods:{type:Object,default:()=>{}},armory:{type:Number,default:0},hitBonus:{type:Number,default:0},damageBonus:{type:Number,default:0}}},g=_,k=(a("9e26"),Object(b["a"])(g,c,u,!1,null,"68a68c86",null)),y=k.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"roll__wrapper",attrs:{visible:t.isVisible,title:"Результат броска",width:"30%"},on:{close:t.closeDialog}},[a("span",{staticClass:"roll__total",class:{crit:"crit"===t.rollResults.type}},[t._v(" "+t._s(t.rollResults.value)+" ")]),a("span",{staticClass:"roll__details",domProps:{innerHTML:t._s(t.rollResults.formula)}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["damage"===t.rollResults.kind?a("el-checkbox",{on:{change:t.rollCrit},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("isCrit?")]):t._e(),a("div",{staticClass:"buttons"},[a("el-button",{attrs:{size:"small"},on:{click:t.rerollDice}},[t._v("Reroll")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.closeDialog}},[t._v("Close")])],1)],1)])},A=[],B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-radio-group",{model:{value:t.currentAttack,callback:function(e){t.currentAttack=e},expression:"currentAttack"}},[a("el-radio",{attrs:{label:0}},[t._v("Первая атака")]),a("el-radio",{attrs:{label:1}},[t._v("Вторая атака")]),a("el-radio",{attrs:{label:2}},[t._v("Третья атака")])],1),a("el-checkbox-group",{attrs:{size:"mini"},model:{value:t.activeBonuses,callback:function(e){t.activeBonuses=e},expression:"activeBonuses"}},t._l(t.combatAbilities,(function(e,s){return a("el-checkbox-button",{key:s,attrs:{label:e.title,disabled:t.isDisabled(e)},on:{change:function(a){return t.changeAbility(e.title)}}},[a("span",[t._v(t._s(e.title))])])})),1)],1)},S=[],R={name:"ToggleAbility",props:{combatAbilities:{type:Array,default:()=>{}},attackNumber:{type:Number,default:0}},data(){return{activeBonuses:[],currentAttack:0}},methods:{isDisabled(t){if("Бешеная ярость"===t.title)return!1;{const t=this.combatAbilities.find(t=>"Бешеная ярость"===t.title).active;return!t}},changeAbility(t){this.$emit("change-activity",t)},changeAttackNumber(){this.$emit("change-attack-number",this.currentAttack)}}},w=R,M=Object(b["a"])(w,B,S,!1,null,null,null),$=M.exports,x={name:"RollResult",components:{ToggleAbility:$},props:{rollResults:{type:Object,default:()=>{}}},data(){return{checked:!1}},computed:{isVisible(){return Boolean(this.rollResults)}},methods:{rerollDice(){this.$emit("reroll")},closeDialog(){this.$emit("close-dialog")},rollCrit(t){this.$emit("roll-crit",t)}}},D=x,O=(a("2cbe"),a("d503"),a("53f8"),Object(b["a"])(D,C,A,!1,null,"145bbbaa",null)),T=O.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"combat"},[a("div",{staticClass:"combat__mod"},[a("div",{staticClass:"combat__bma-wrapper",on:{change:t.changeAttackNumber}},[a("span",[t._v("БМА: ")]),a("el-radio-group",{model:{value:t.currentAttack,callback:function(e){t.currentAttack=e},expression:"currentAttack"}},[a("el-radio",{attrs:{label:0,border:"",size:"small"}},[t._v("11")]),a("el-radio",{attrs:{label:1,border:"",size:"small"}},[t._v("6")]),a("el-radio",{attrs:{label:2,border:"",size:"small"}},[t._v("1")])],1)],1),a("el-checkbox-group",{attrs:{size:"mini"},model:{value:t.activeBonuses,callback:function(e){t.activeBonuses=e},expression:"activeBonuses"}},t._l(t.combatAbilities,(function(e,s){return a("el-checkbox-button",{key:s,staticClass:"combat__mod-button",attrs:{label:e.title,disabled:t.isDisabled(e)},on:{change:function(a){return t.changeAbility(e.title)}}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.description,placement:"right"}},[a("span",[t._v(t._s(e.title))])])],1)})),1)],1),a("el-button-group",[a("el-button",{attrs:{type:"warning",icon:"el-icon-aim",size:"small",round:"",plain:""},on:{click:function(e){return t.rollCheck("hit")}}},[t._v("Атака ")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-magic-stick",size:"small",round:"",plain:""},on:{click:function(e){return t.rollCheck("damage")}}},[t._v("Урон ")])],1)],1)},z=[],W={name:"Combat",components:{},props:{combatAbilities:{type:Array,default:()=>{}}},data(){return{activeBonuses:[],currentAttack:0}},methods:{isDisabled(t){if("Бешеная ярость"===t.title||"Сокрушительный удар"===t.title||"Жестокий удар+"===t.title||"Чардж"===t.title)return!1;{const t=this.combatAbilities.find(t=>"Бешеная ярость"===t.title).active;return!t}},changeAbility(t){this.$emit("transfer-bonuses",t)},changeAttackNumber(){this.$emit("change-attack-number",this.currentAttack)},rollCheck(t){this.$emit("roll-check",t)}}},P=W,I=(a("4c32"),a("e95e"),Object(b["a"])(P,j,z,!1,null,"e96b5c04",null)),N=I.exports,E={name:"CharacterMain",components:{CharacteristicOut:y,RollResult:T,Combat:N},data(){return{currentLvl:11,mainStat:{str:{base:20,minus:[],plus:[],name:"Сила",short_name:"Сил"},agl:{base:16,minus:[],plus:[],name:"Ловкость",short_name:"Лвк"},stm:{base:14,minus:[],plus:[],name:"Выносливость",short_name:"Вын"},int:{base:10,minus:[],plus:[],name:"Интеллект",short_name:"Инт"},wisdom:{base:11,minus:[],plus:[],name:"Мудрость",short_name:"Мдр"},char:{base:14,minus:[],plus:[],name:"Харизма",short_name:"Хар"}},BMA:[11,6,1],currentAttack:0,skillPoints:{multiplier:4,stat:"int",description:"4 * модификатор Интеллекта за уровень"},classSkills:[{title:"Акробатика",mod:"agl"},{title:"Верховая езда",mod:"agl"},{title:"Внимание",mod:"wisdom"},{title:"Выживание",mod:"wisdom"},{title:"Дрессировка",mod:"char"},{title:"Запугивание",mod:"char"},{title:"Знание природы",mod:"int"},{title:"Лазание",mod:"str"},{title:"Плавание",mod:"str"},{title:"Ремесло",mod:"int"}],health:{hpPerLvl:{count:1,dice:12},total:118,current:118,buffed:0},weaponItem:{kosa:{title:"isk-kosa-vampirizma",name:"Искусная коса вампиризма",bonus:2,damage:{count:2,dice:4},description:"Восстанавливает половину нанесенного урона",active:!0,multiplier:1.5,crit:4}},rollResults:null,historyRoll:[],rollType:"",activeTab:"combat",abilities:{"Ярость":{title:"Бешеная ярость",count:"4 + модификатор выносливости",active:!1,display:!0,description:"Сила: +6, Выносливость: +6, Воля: +3, КБ: -2",rageGifts:[{title:"Могучий удар",description:"Дар ярости. 1 + 1 за каждые 4 уровня персонажа (+3) к проверке урона. Может использоваться только один раз за приступ ярости",display:!0,active:!1},{title:"Восстановление сил",description:"Дар ярости. Основное действие. Восстановить 2d8 здоровья один раз в день",display:!0,active:!1},{title:"Устрашающий взгляд",description:"Проверка запугивания врагов на соседней клетке",display:!1,active:!1},{title:"Ужасный вой",description:"Все в радиусе 30 футов должны пройти испытание Воли (10 + 0,5 * лвл + модификатор Силы)",display:!1,active:!1},{title:"Снижение урона",description:"Снижение урона на 1",display:!1,active:!0}]},"Расовые":{"Обнаружение яда":{description:"Обнаружение яда"},"Очищение еды и питья":{description:"Очищение еды и питья"},"Горькоцвет":{description:"Возможность отращивать светящийся цветок на любой части тела"},"Вкусный":{description:"Штраф к уклонениям после уккуса противником"},"Зависимость от света":{description:"При отсутсвии солнечного света завядаешь"},"Семечко":{description:"Можешь пересадить из себя семечко, умереть и переродиться"}}},features:{"Сокрушительный удар":{title:"Сокрушительный удар",active:!1,display:!0,description:"-1 к попаданию, +2 к урону. За каждые 4 уровня еще -1 и +2"},"Жестокий удар+":{title:"Жестокий удар+",active:!1,display:!0,description:"Тройной базовый урон одной атакой"},"Чардж":{title:"Чардж",active:!1,display:!0,description:"Рывок к цели, находящейся не менее, чем в трех пустых клетках. +2 к попаднию, -2 к КБ"}},hitBonus:0,damageBonus:0,armoryClass:30,multiplierDamage:1,critDamage:1}},computed:{dice(){return o},mainStatTotal(){const{str:t,agl:e,stm:a,int:s,wisdom:i,char:r}=this.mainStat;return{str:{value:t.base-this._arrSum(t.minus)+this._arrSum(t.plus)+2,name:t.name,short_name:t.short_name},agl:{value:e.base-this._arrSum(e.minus)+this._arrSum(e.plus)+2,name:e.name,short_name:e.short_name},stm:{value:a.base-this._arrSum(a.minus)+this._arrSum(a.plus)+2,name:a.name,short_name:a.short_name},int:{value:s.base-this._arrSum(s.minus)+this._arrSum(s.plus),name:s.name,short_name:s.short_name},wisdom:{value:i.base-this._arrSum(i.minus)+this._arrSum(i.plus),name:i.name,short_name:i.short_name},char:{value:r.base-this._arrSum(r.minus)+this._arrSum(r.plus),name:r.name,short_name:r.short_name}}},modStatTotal(){const{str:t,agl:e,stm:a,int:s,wisdom:i,char:r}=this.mainStatTotal,l=t=>Math.floor((t-10)/2);return{str:l(t.value),agl:l(e.value),stm:l(a.value),int:l(s.value),wisdom:l(i.value),char:l(r.value)}},currentWeapon(){let t={};for(let e in this.weaponItem)if(!0===this.weaponItem[e].active){t=this.weaponItem[e];break}return t},combatAbilities(){const{title:t,description:e,rageGifts:a,active:s,display:i}=this.abilities["Ярость"],{title:r,description:l,active:n,display:o}=this.features["Сокрушительный удар"],{title:c,description:u,active:m,display:h}=this.features["Жестокий удар+"],{title:d,description:p,active:b,display:f}=this.features["Чардж"];return[...a,{title:t,description:e,active:s,display:i},{title:r,description:l,active:n,display:o},{title:c,description:u,active:m,display:h},{title:d,description:p,active:b,display:f}].filter(t=>t.display).reverse()}},methods:{_getRandomInteger(t=0,e=1){const a=Math.ceil(Math.min(t,e)),s=Math.floor(Math.max(t,e));return Math.floor(a+Math.random()*(s-a+1))},_arrSum(t){let e=0;for(let a=0;a<t.length;a++)e+=t[a];return e},rollDice(t=20,e=1){let a=[],s=0;for(let i=0;i<e;i++){const e=this._getRandomInteger(1,t);a.push(e),s+=e}return{rolls:a,total:s}},checkHit(){const t=this.rollDice(20),e=this.BMA[this.currentAttack]+this.modStatTotal.str+this.hitBonus+this.currentWeapon.bonus;return{kind:"hit",value:t.total+e,rolls:t.rolls,type:20===t.total||1===t.total?"crit":"normal",formula:`Результат кубика: ${t.total}<br>\n\t\t\t\t\t\t\t\t\tМодификатор силы: ${this.modStatTotal.str}<br>\n\t\t\t\t\t\t\t\t\tТекущий БМА: ${this.BMA[this.currentAttack]}<br>\n\t\t\t\t\t\t\t\t\tБонус к попаданию: ${this.hitBonus}<br>\n\t\t\t\t\t\t\t\t\tБонус от оружия: ${this.currentWeapon.bonus} `}},checkDamage(){const t=this.currentWeapon.damage.count*this.multiplierDamage*this.critDamage,e=this.rollDice(this.currentWeapon.damage.dice,t);return{kind:"damage",value:Math.round(this.modStatTotal.str*this.currentWeapon.multiplier)+e.total+this.damageBonus+this.currentWeapon.bonus,formula:`Урон от оружия(${t}d${this.currentWeapon.damage.dice}): [${e.rolls}] = <span style="font-size: 18px;">${e.total}</span><br>\n\t\t\t\t\t\t\t\t\tМодификатор силы (${this.modStatTotal.str} * ${this.currentWeapon.multiplier}): <span style=" font-size: 18px;">${Math.round(this.modStatTotal.str*this.currentWeapon.multiplier)}</span><br>\n\t\t\t\t\t\t\t\t\tБонус урона: ${this.damageBonus}`}},checkHeal(){const t=this.rollDice(8,2);return{value:t.total,formula:"Броски: "+t.rolls}},rollCheck(t=this.rollType){switch(console.log(t),this.rollType=t,t){case"hit":this.rollResults=this.checkHit();break;case"damage":this.rollResults=this.checkDamage();break;case"heal":this.rollResults=this.checkHeal();break;default:this.rollResults=this.rollDice();break}},rollCrit(t){console.log(t),this.critDamage=t?this.currentWeapon.crit:1},clearRollResult(){this.historyRoll.push(this.rollResults),this.rollResults=null,this.rollType="",this.critDamage=1},changeAttack(t){this.currentAttack=t},transferBonuses(t){switch(console.log(t),t){case"Бешеная ярость":this.abilities["Ярость"].active=!this.abilities["Ярость"].active,this.abilities["Ярость"].active?(this.mainStat.str.plus.push(6),this.mainStat.stm.plus.push(6),this.armoryClass-=2):(this.mainStat.str.plus.splice(this.mainStat.str.plus.findIndex(t=>6===t),1),this.mainStat.stm.plus.splice(this.mainStat.stm.plus.findIndex(t=>6===t),1));break;case"Могучий удар":let t=this.abilities["Ярость"].rageGifts.find(t=>"Могучий удар"===t.title);console.log(t),t.active=!t.active,t.active?this.damageBonus+=1+Math.floor(this.currentLvl/4):this.damageBonus-=1+Math.floor(this.currentLvl/4);break;case"Восстановление сил":this.rollCheck("heal");break;case"Жестокий удар+":this.features["Жестокий удар+"].active=!this.features["Жестокий удар+"].active,this.features["Жестокий удар+"].active?this.multiplierDamage*=3:this.multiplierDamage/=3;break;case"Сокрушительный удар":this.features["Сокрушительный удар"].active=!this.features["Сокрушительный удар"].active;const e=2;this.features["Сокрушительный удар"].active?(this.hitBonus-=1+Math.floor(this.BMA[0]/4),this.damageBonus+=e+e*Math.floor(this.BMA[0]/4)):(this.hitBonus+=1+Math.floor(this.BMA[0]/4),this.damageBonus-=e+e*Math.floor(this.BMA[0]/4));break;case"Чардж":this.features["Чардж"].active=!this.features["Чардж"].active,this.features["Чардж"].active?(this.hitBonus+=2,this.armoryClass-=2):(this.hitBonus-=2,this.armoryClass+=2);break;default:break}}}},H=E,L=(a("7e0b"),Object(b["a"])(H,l,n,!1,null,"28d402a3",null)),G=L.exports,J={name:"App",components:{CharacterMain:G}},V=J,q=(a("fce8"),Object(b["a"])(V,i,r,!1,null,null,null)),F=q.exports,K=a("5c96"),Q=a.n(K),U=(a("0fae"),a("dccd")),X=a.n(U);s["default"].use(Q.a,{locale:X.a}),s["default"].config.productionTip=!1,new s["default"]({render:function(t){return t(F)}}).$mount("#app")},6814:function(t,e,a){},"7e0b":function(t,e,a){"use strict";a("6814")},"9e26":function(t,e,a){"use strict";a("1c92")},a4ca:function(t,e,a){},bbb4:function(t,e,a){},c248:function(t,e,a){},d503:function(t,e,a){"use strict";a("18d4")},e3a4:function(t,e,a){},e95e:function(t,e,a){"use strict";a("bbb4")},eb79:function(t,e,a){"use strict";a("3003")},f10d:function(t,e,a){},fce8:function(t,e,a){"use strict";a("a4ca")}});
//# sourceMappingURL=app.ab7c684e.js.map